<nav class="navbar navbar-expand-lg bg-body-tertiary" data-bs-theme="dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'main_page' %}">Perfumeria BLUM</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarScroll">
      <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="{% url 'main_page' %}">Sklep</a>
         </li>
        {% if user.is_authenticated %}
             <li class="nav-item">
          <a class="nav-link" href="{% url 'my_account' %}">Moje konto</a>
        </li>
          {% endif %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Dla niego
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="{% url 'category_page' 'Men' %}">Perfumy</a></li>
            <!--<li><a class="dropdown-item" href="#"> Probki</a></li> -->
          </ul>
        </li>
       <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Dla niej
          </a>
          <ul class="dropdown-menu">
             <li><a class="dropdown-item" href="{% url 'category_page' 'Women' %}">Perfumy</a></li>
            <!--<li><a class="dropdown-item" href="#"> Probki</a></li> -->

          </ul>

        </li>
       <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Unixsex
          </a>
          <ul class="dropdown-menu">
             <li><a class="dropdown-item" href="{% url 'category_page' 'Unisex' %}">Perfumy</a></li>
            <!--<li><a class="dropdown-item" href="#"> Probki</a></li> -->
          </ul>

        </li>
         <li class="nav-item">
          <a class="nav-link" href="{% url 'category_page' 'Discoverset' %}">Discover set</a>
        </li>


      </ul>


<form class="d-flex" role="search">
    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" id="searchInput">
    <div id="searchResults"></div>
</form>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');

        searchInput.addEventListener('input', function () {
            const query = searchInput.value.trim();
            if (query.length === 0) {
                searchResults.innerHTML = '';
                return;
            }

            fetch(`/live-search/?query=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(data => {
                    const results = data.results;
                    let html = '';
                    if (results.length === 0) {
                        html = '<div class="alert alert-warning" role="alert">No results found</div>';
                    } else {
                        html = '<ul class="list-group">';
                        results.forEach(result => {
                            html += `<li class="list-group-item"><a href="/product/${result[1]}">${result[0]}</a></li>`;
                        });
                        html += '</ul>';
                    }
                    searchResults.innerHTML = html;
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        });
    });
</script>


     {% if user.is_authenticated %}
            <a class="btn btn-outline-success" href="{% url 'logout' %}" type="submit">Wyloguj </a>
          {% else %}
            <a class="btn btn-outline-success m-1"  href="{% url 'login' %}" type="submit">Zaloguj </a>
           <a class="btn btn-outline-success m-1" href="{% url 'register' %}" type="submit">Zarejestruj </a>
          {% endif %}
    </div>
  </div>
</nav>